<div class="example-container">
  <div class="flex flex-wrap gap-2 items-center justify-start mt-4 mb-4">
    <button mat-stroked-button color="primary" routerLink="/advanced">Go to List</button>
    <button mat-stroked-button color="primary" [routerLink]="'/advanced/example2'">Prev</button>
    <button mat-stroked-button color="primary" [routerLink]="'/advanced/example4'">Next</button>
  </div>

  <mat-tab-group>
    <!-- Demo Tab -->
    <mat-tab label="Demo">
      <div class="content-area">
        <h2>Example 3: Real-World <code>ng-template</code> Use Cases</h2>
        <p>
          This example demonstrates advanced and practical uses of <code>ng-template</code> in Angular, including conditional rendering, template outlets, context passing, and custom structural directives.
        </p>
      </div>
      <div class="demo-section">
        <mat-card>
          <mat-card-content>
            <mat-tab-group>
              <!-- 1. Conditional Rendering -->
              <mat-tab label="Conditional Rendering">
                <h3>Login Status</h3>
                <p>
                  Use <code>*ngIf</code> with <code>&lt;ng-template&gt;</code> to show different content based on login state.
                </p>
                <markdown [src]="'assets/examples/advanced/example3/usecase-conditional-rendering.md'"></markdown>
                <button mat-raised-button (click)="toggleLogin()">
                  {{ isLoggedIn() ? 'Logout' : 'Login' }}
                </button>
                @if (isLoggedIn()) {
                  <p>Welcome back, user!</p>
                } @else {
                  <p>Please log in to continue.</p>
                }
              </mat-tab>

              <!-- 2. List Rendering -->
              <mat-tab label="List Rendering">
                <h3>Product List</h3>
                <p>
                  Use <code>*ngFor</code> with <code>&lt;ng-template&gt;</code> to render lists and handle empty states.
                </p>
                <markdown [src]="'assets/examples/advanced/example3/usecase-list-rendering.md'"></markdown>
                <ul>
                  @for (product of products(); track product) {
                    <li>{{ product.name }} - ${{ product.price }}</li>
                  }
                  <ng-template #noProducts>
                    <li>No products available.</li>
                  </ng-template>
                </ul>
              </mat-tab>

              <!-- 3. Template Reference & Reuse -->
              <mat-tab label="Template Outlet">
                <h3>Reusable Dialog</h3>
                <p>
                  Reference a template and render it dynamically using <code>[ngTemplateOutlet]</code> and <code>[ngTemplateOutletContext]</code>.
                </p>
                <markdown [src]="'assets/examples/advanced/example3/usecase-template-outlet.md'"></markdown>
                <button mat-raised-button (click)="openDialog()">Show Dialog</button>
                @if (showDialog()) {
                  <ng-container
                    [ngTemplateOutlet]="dialogTemplate"
                    [ngTemplateOutletContext]="{ $implicit: 'Hello from dialog!' }">
                  </ng-container>
                }
                <ng-template #dialogTemplate let-message>
                  <div class="dialog">
                    <p>{{ message }}</p>
                    <button mat-button (click)="closeDialog()">Close</button>
                  </div>
                </ng-template>
              </mat-tab>

              <!-- 4. Passing Context -->
              <mat-tab label="Context Passing">
                <h3>Custom Greeting</h3>
                <p>
                  Pass custom context to a template using <code>[ngTemplateOutletContext]</code> and access it with <code>let-</code> variables.
                </p>
                <markdown [src]="'assets/examples/advanced/example3/usecase-context-passing.md'"></markdown>
                <ng-container
                  [ngTemplateOutlet]="greetingTemplate"
                  [ngTemplateOutletContext]="{ name: 'Alice' }">
                </ng-container>
                <ng-template #greetingTemplate let-name="name">
                  <p>Hello, {{ name }}!</p>
                </ng-template>
              </mat-tab>

              <!-- 5. Custom Structural Directive -->
              <mat-tab label="Custom Directive">
                <h3>Show On Even</h3>
                <p>
                  Create a custom structural directive using <code>TemplateRef</code> and <code>ViewContainerRef</code> to show content only when a condition is met.
                </p>
                <markdown [src]="'assets/examples/advanced/example3/usecase-custom-directive.md'"></markdown>
                <button mat-raised-button (click)="incrementCounter()">Increment ({{ counter() }})</button>
                <div *appShowOnEven="counter()">
                  <p>The counter is even!</p>
                </div>
              </mat-tab>

              <!-- 6. Dynamic Content Loading -->
              <mat-tab label="Dynamic Content">
                <h3>Dynamic Content</h3>
                <p>
                  Dynamically load and display content using <code>&lt;ng-template&gt;</code> and <code>[ngTemplateOutlet]</code>.
                </p>
                <markdown [src]="'assets/examples/advanced/example3/usecase-dynamic-content.md'"></markdown>
                <button mat-raised-button (click)="toggleContent()">
                  {{ loadContent() ? 'Unload' : 'Load' }} Content
                </button>
                @if (loadContent()) {
                  <ng-template [ngTemplateOutlet]="dynamicContent"></ng-template>
                } @else {
                  <p>Click "Load Content" to display dynamic content.</p>
                }
                <ng-template #dynamicContent>
                  <p>This content was loaded dynamically!</p>
                </ng-template>
              </mat-tab>
            </mat-tab-group>
          </mat-card-content>
        </mat-card>
      </div>
    </mat-tab>

    <!-- Markdown Tabs for Source Code -->
    <mat-tab label="Directive">
      <markdown clipboard [src]="'assets/examples/advanced/example3/app-show-on-even.directive.ts.md'"></markdown>
    </mat-tab>
    <mat-tab label="HTML">
      <markdown clipboard [src]="'assets/examples/advanced/example3/advanced-example3.component.html.md'"></markdown>
    </mat-tab>
    <mat-tab label="TS">
      <markdown clipboard [src]="'assets/examples/advanced/example3/advanced-example3.component.ts.md'"></markdown>
    </mat-tab>
    <mat-tab label="SCSS">
      <markdown clipboard [src]="'assets/examples/advanced/example3/advanced-example3.component.scss.md'"></markdown>
    </mat-tab>
  </mat-tab-group>
</div>
